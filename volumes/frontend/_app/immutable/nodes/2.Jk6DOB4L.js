import"../chunks/DsnmJJEf.js";import{i as Ra}from"../chunks/BlNZzwNl.js";import{d as Ha,o as Pa,e as qa,s as J}from"../chunks/fuLym9tQ.js";import{c as sa,h as U,ac as Ua,e as ka,a as Ba,b as Ja,t as c,ay as Va,r as $a,H as Fa,s as ya,d as la,k as X,S as Ga,ak as Ka,f as da,i as Ya,g as z,ah as Ta,a8 as Sa,az as $,M as ba,Q as za,j as xa,p as Qa,aA as Wa,aB as ta,$ as Ma,aC as Xa,aD as ja,a5 as Za,aE as ae,ag as ee,aF as re,R as se,aG as wa,aH as le,aI as te,aJ as ne,a9 as ie,P as ve,aK as ue,aL as oe,aM as fe,ax as ce,n as de,N as _e,aN as he,I as me,y as O,A as na,C,K as ge,z as L,aO as I,G as g,D as E,J as Y,aP as pe,a0 as ye,aQ as Ea}from"../chunks/LWlrihY-.js";import{i as V}from"../chunks/PH7CBL__.js";function ia(a,e){return e}function be(a,e,r){for(var t=a.items,s=[],l=e.length,u=0;u<l;u++)ae(e[u].e,s,!0);var h=l>0&&s.length===0&&r!==null;if(h){var k=r.parentNode;ee(k),k.append(r),t.clear(),q(a,e[0].prev,e[l-1].next)}re(s,()=>{for(var p=0;p<l;p++){var N=e[p];h||(t.delete(N.k),q(a,N.prev,N.next)),Ma(N.e,!h)}})}function va(a,e,r,t,s,l=null){var u=a,h={flags:e,items:new Map,first:null};{var k=a;u=U?sa(Ua(k)):k.appendChild(ka())}U&&Ba();var p=null,N=!1,B=new Map,v=Va(()=>{var _=r();return Sa(_)?_:_==null?[]:Ta(_)}),y,o;function d(){Ee(o,y,h,B,u,s,e,t,r),l!==null&&(y.length===0?p?xa(p):p=da(()=>l(u)):p!==null&&Qa(p,()=>{p=null}))}Ja(()=>{o??=se,y=c(v);var _=y.length;if(N&&_===0)return;N=_===0;let H=!1;if(U){var D=$a(u)===Fa;D!==(_===0)&&(u=ya(),sa(u),la(!1),H=!0)}if(U){for(var m=null,x,b=0;b<_;b++){if(X.nodeType===Ga&&X.data===Ka){u=X,H=!0,la(!1);break}var P=y[b],n=t(P,b);x=_a(X,h,m,null,P,n,b,s,e,r),h.items.set(n,x),m=x}_>0&&sa(ya())}if(U)_===0&&l&&(p=da(()=>l(u)));else if(Ya()){var i=new Set,f=z;for(b=0;b<_;b+=1){P=y[b],n=t(P,b);var M=h.items.get(n)??B.get(n);M?Ia(M,P,b):(x=_a(null,h,null,null,P,n,b,s,e,r,!0),B.set(n,x)),i.add(n)}for(const[A,T]of h.items)i.has(A)||f.skipped_effects.add(T.e);f.add_callback(d)}else d();H&&la(!0),c(v)}),U&&(u=X)}function Ee(a,e,r,t,s,l,u,h,k){var p=e.length,N=r.items,B=r.first,v=B,y,o=null,d=[],_=[],H,D,m,x;for(x=0;x<p;x+=1){if(H=e[x],D=h(H,x),m=N.get(D),m===void 0){var b=t.get(D);if(b!==void 0){t.delete(D),N.set(D,b);var P=o?o.next:v;q(r,o,b),q(r,b,P),ua(b,P,s),o=b}else{var n=v?v.e.nodes_start:s;o=_a(n,r,o,o===null?r.first:o.next,H,D,x,l,u,k)}N.set(D,o),d=[],_=[],v=o.next;continue}if(Ia(m,H,x),(m.e.f&ta)!==0&&xa(m.e),m!==v){if(y!==void 0&&y.has(m)){if(d.length<_.length){var i=_[0],f;o=i.prev;var M=d[0],A=d[d.length-1];for(f=0;f<d.length;f+=1)ua(d[f],i,s);for(f=0;f<_.length;f+=1)y.delete(_[f]);q(r,M.prev,A.next),q(r,o,M),q(r,A,i),v=i,o=A,x-=1,d=[],_=[]}else y.delete(m),ua(m,v,s),q(r,m.prev,m.next),q(r,m,o===null?r.first:o.next),q(r,o,m),o=m;continue}for(d=[],_=[];v!==null&&v.k!==D;)(v.e.f&ta)===0&&(y??=new Set).add(v),_.push(v),v=v.next;if(v===null)continue;m=v}d.push(m),o=m,v=m.next}if(v!==null||y!==void 0){for(var T=y===void 0?[]:Ta(y);v!==null;)(v.e.f&ta)===0&&T.push(v),v=v.next;var S=T.length;if(S>0){var w=p===0?s:null;be(r,T,w)}}a.first=r.first&&r.first.e,a.last=o&&o.e;for(var R of t.values())Ma(R.e);t.clear()}function Ia(a,e,r,t){za(a.v,e),a.i=r}function _a(a,e,r,t,s,l,u,h,k,p,N){var B=(k&Xa)!==0,v=(k&ja)===0,y=B?v?$(s,!1,!1):ba(s):s,o=(k&Wa)===0?u:ba(u),d={i:o,v:y,k:l,a:null,e:null,prev:r,next:t};try{if(a===null){var _=document.createDocumentFragment();_.append(a=ka())}return d.e=da(()=>h(a,y,o,p),U),d.e.prev=r&&r.e,d.e.next=t&&t.e,r===null?N||(e.first=d):(r.next=d,r.e.next=d.e),t!==null&&(t.prev=d,t.e.prev=d.e),d}finally{}}function ua(a,e,r){for(var t=a.next?a.next.e.nodes_start:r,s=e?e.e.nodes_start:r,l=a.e.nodes_start;l!==null&&l!==t;){var u=Za(l);s.before(l),l=u}}function q(a,e,r){e===null?a.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Na(a,e,r=!1){if(a.multiple){if(e==null)return;if(!Sa(e))return te();for(var t of a.options)t.selected=e.includes(j(t));return}for(t of a.options){var s=j(t);if(ne(s,e)){t.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function Ae(a){var e=new MutationObserver(()=>{Na(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ie(()=>{e.disconnect()})}function ke(a,e,r=e){var t=!0;wa(a,"change",s=>{var l=s?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(l),j);else{var h=a.querySelector(l)??a.querySelector("option:not([disabled])");u=h&&j(h)}r(u)}),le(()=>{var s=e();if(Na(a,s,t),t&&s===void 0){var l=a.querySelector(":checked");l!==null&&(s=j(l),r(s))}a.__value=s,t=!1}),Ae(a)}function j(a){return"__value"in a?a.__value:a.value}const Te=Symbol("is custom element"),Se=Symbol("is html");function xe(a){if(U){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var t=a.value;Aa(a,"value",null),a.value=t}if(a.hasAttribute("checked")){var s=a.checked;Aa(a,"checked",null),a.checked=s}}};a.__on_r=r,ve(r),ue()}}function Aa(a,e,r,t){var s=Me(a);U&&(s[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(a[oe]=r),a.removeAttribute(e))}function Me(a){return a.__attributes??={[Te]:a.nodeName.includes("-"),[Se]:a.namespaceURI===fe}}function we(a,e,r=e){var t=new WeakSet;wa(a,"input",async s=>{var l=s?a.defaultValue:a.value;if(l=oa(a)?fa(l):l,r(l),z!==null&&t.add(z),await ce(),l!==(l=e())){var u=a.selectionStart,h=a.selectionEnd;a.value=l??"",h!==null&&(a.selectionStart=u,a.selectionEnd=Math.min(h,a.value.length))}}),(U&&a.defaultValue!==a.value||de(e)==null&&a.value)&&(r(oa(a)?fa(a.value):a.value),z!==null&&t.add(z)),_e(()=>{var s=e();if(a===document.activeElement){var l=he??z;if(t.has(l))return}oa(a)&&s===fa(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function oa(a){var e=a.type;return e==="number"||e==="range"}function fa(a){return a===""?null:+a}const ca="http://127.0.0.1:8000";var Ie=O('<div class="loading-container svelte-1uha8ag"><div class="loading-spinner svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Laddar meny...</p></div>'),Ne=(a,e,r)=>e(c(r).id),Ce=O('<span class="loading-spinner svelte-1uha8ag"></span>'),Le=O('<button class="btns svelte-1uha8ag"><!> </button>'),Oe=O('<div class="btn-container svelte-1uha8ag"></div>'),De=O('<p class="svelte-1uha8ag"> </p>'),Re=O('<li class="svelte-1uha8ag"> </li>'),He=O('<ul class="svelte-1uha8ag"></ul>'),Pe=O('<div class="system-info svelte-1uha8ag"><div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">CPU:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Minne:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Disk:</span> <span class="value svelte-1uha8ag"> </span></div></div>'),qe=O('<div class="result-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Resultat:</h3> <div class="result-content svelte-1uha8ag"><!></div></div>'),Ue=O('<div class="alarm-inputs svelte-1uha8ag"><form class="svelte-1uha8ag"><label class="svelte-1uha8ag">Typ: <select class="svelte-1uha8ag"><option>CPU användning</option><option>Minnesanvändning</option><option>Diskanvändning</option></select></label> <label class="svelte-1uha8ag">Threshold (%): <input type="number" min="1" max="100" class="svelte-1uha8ag"/></label> <button type="submit" class="svelte-1uha8ag">Skapa larm</button></form></div>'),Be=O('<li class="alarm-item svelte-1uha8ag"><span class="alarm-type svelte-1uha8ag"> </span> <span class="alarm-threshold svelte-1uha8ag"> </span></li>'),Je=O('<div class="alarms-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Aktiva larm:</h3> <ul class="alarms-list svelte-1uha8ag"></ul></div>'),Ve=O("<!> <!> <!> <!>",1);function ze(a,e){me(e,!1);let r=$([]),t=[],s=$(null),l=$(!1),u=$(!0),h=$(!1),k=$("CPU användning"),p=$(50);async function N(){try{let i=await(await fetch(`${ca}/menu`)).json();I(r,i.options),console.log(c(r))}catch(n){console.log(n.message),console.log(n)}finally{I(u,!1)}}async function B(n){if(I(l,!0),I(s,null),n===3){I(h,!0),I(l,!1);return}try{let f=await(await fetch(`${ca}/select`,{method:"POST",body:JSON.stringify({choice:n}),headers:{"Content-Type":"application/json"}})).json();I(s,f.result),console.log(f)}catch(i){console.log(i.message),I(s,"Ett fel uppstod: "+i.message)}finally{I(l,!1)}}async function v(n){n.preventDefault(),I(l,!0);try{const f=await(await fetch(`${ca}/set_alarm/3`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:c(k),threshold:c(p)})})).json();t.push(f),I(h,!1),I(s,`Larm skapat: ${f.message||"Larm skapat framgångsrikt"}`)}catch(i){console.error("Error creating alarm:",i),I(s,"Ett fel uppstod: "+i.message)}finally{I(l,!1)}}Pa(()=>N()),Ra();var y=Ve(),o=na(y);{var d=n=>{var i=Ie();C(n,i)},_=n=>{var i=Oe();va(i,5,()=>c(r),ia,(f,M)=>{var A=Le();A.__click=[Ne,B,M];var T=E(A);{var S=R=>{var Q=Ce();C(R,Q)};V(T,R=>{c(l)&&R(S)})}var w=L(T);g(A),Y(()=>{A.disabled=c(l),J(w,` ${c(M).text??""}`)}),C(f,A)}),g(i),C(n,i)};V(o,n=>{c(u)?n(d):n(_,!1)})}var H=L(o,2);{var D=n=>{var i=qe(),f=L(E(i),2),M=E(f);{var A=S=>{var w=De(),R=E(w,!0);g(w),Y(()=>J(R,c(s))),C(S,w)},T=S=>{var w=Ea(),R=na(w);{var Q=G=>{var K=He();va(K,5,()=>c(s),ia,(Z,aa)=>{var F=Re(),W=E(F,!0);g(F),Y(()=>J(W,c(aa))),C(Z,F)}),g(K),C(G,K)},Ca=G=>{var K=Ea(),Z=na(K);{var aa=F=>{var W=Pe(),ea=E(W),ha=L(E(ea),2),La=E(ha);g(ha),g(ea);var ra=L(ea,2),ma=L(E(ra),2),Oa=E(ma);g(ma),g(ra);var ga=L(ra,2),pa=L(E(ga),2),Da=E(pa);g(pa),g(ga),g(W),Y(()=>{J(La,`${c(s).cpu_percent??""}%`),J(Oa,`${c(s).memory_percent??""}%`),J(Da,`${c(s).disk_percent??""}%`)}),C(F,W)};V(Z,F=>{typeof c(s)=="object"&&F(aa)},!0)}C(G,K)};V(R,G=>{Array.isArray(c(s))?G(Q):G(Ca,!1)},!0)}C(S,w)};V(M,S=>{typeof c(s)=="string"?S(A):S(T,!1)})}g(f),g(i),C(n,i)};V(H,n=>{c(s)&&n(D)})}var m=L(H,2);{var x=n=>{var i=Ue(),f=E(i),M=E(f),A=L(E(M));Y(()=>{c(k),pe(()=>{})}),g(M);var T=L(M,2),S=L(E(T));xe(S),g(T),ye(2),g(f),g(i),qa("submit",f,v),ke(A,()=>c(k),w=>I(k,w)),we(S,()=>c(p),w=>I(p,w)),C(n,i)};V(m,n=>{c(h)&&n(x)})}var b=L(m,2);{var P=n=>{var i=Je(),f=L(E(i),2);va(f,5,()=>t,ia,(M,A)=>{var T=Be(),S=E(T),w=E(S,!0);g(S);var R=L(S,2),Q=E(R);g(R),g(T),Y(()=>{J(w,c(A).type||c(k)),J(Q,`${(c(A).threshold||c(p))??""}%`)}),C(M,T)}),g(f),g(i),C(n,i)};V(b,n=>{t.length>0&&n(P)})}C(a,y),ge()}Ha(["click"]);export{ze as component};
