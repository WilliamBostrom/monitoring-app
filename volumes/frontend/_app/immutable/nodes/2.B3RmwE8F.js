import"../chunks/DsnmJJEf.js";import{i as Da}from"../chunks/BlNZzwNl.js";import{d as Pa,o as Ha,e as Ua,s as B}from"../chunks/fuLym9tQ.js";import{c as la,h as q,ac as qa,e as Ta,a as Va,b as Ba,t as c,ay as Fa,r as Ja,H as $a,s as ya,d as ta,k as X,S as Ga,ak as Ka,f as da,i as Ya,g as z,ah as ka,a8 as Sa,az as J,M as ba,Q as za,j as xa,p as Qa,aA as Wa,aB as na,$ as Ma,aC as Xa,aD as ja,a5 as Za,aE as ae,ag as ee,aF as re,R as se,aG as Ia,aH as le,aI as te,aJ as ne,a9 as ie,P as ve,aK as oe,aL as ue,aM as fe,ax as ce,n as de,N as _e,aN as he,I as me,y as O,A as ia,C,K as ge,z as L,aO as w,G as g,D as E,J as Y,aP as pe,a0 as ye,aQ as Ea}from"../chunks/LWlrihY-.js";import{i as F}from"../chunks/PH7CBL__.js";function va(a,e){return e}function be(a,e,r){for(var t=a.items,s=[],l=e.length,o=0;o<l;o++)ae(e[o].e,s,!0);var h=l>0&&s.length===0&&r!==null;if(h){var T=r.parentNode;ee(T),T.append(r),t.clear(),U(a,e[0].prev,e[l-1].next)}re(s,()=>{for(var p=0;p<l;p++){var N=e[p];h||(t.delete(N.k),U(a,N.prev,N.next)),Ma(N.e,!h)}})}function oa(a,e,r,t,s,l=null){var o=a,h={flags:e,items:new Map,first:null};{var T=a;o=q?la(qa(T)):T.appendChild(Ta())}q&&Va();var p=null,N=!1,V=new Map,v=Fa(()=>{var _=r();return Sa(_)?_:_==null?[]:ka(_)}),y,u;function d(){Ee(u,y,h,V,o,s,e,t,r),l!==null&&(y.length===0?p?xa(p):p=da(()=>l(o)):p!==null&&Qa(p,()=>{p=null}))}Ba(()=>{u??=se,y=c(v);var _=y.length;if(N&&_===0)return;N=_===0;let P=!1;if(q){var R=Ja(o)===$a;R!==(_===0)&&(o=ya(),la(o),ta(!1),P=!0)}if(q){for(var m=null,x,b=0;b<_;b++){if(X.nodeType===Ga&&X.data===Ka){o=X,P=!0,ta(!1);break}var H=y[b],n=t(H,b);x=_a(X,h,m,null,H,n,b,s,e,r),h.items.set(n,x),m=x}_>0&&la(ya())}if(q)_===0&&l&&(p=da(()=>l(o)));else if(Ya()){var i=new Set,f=z;for(b=0;b<_;b+=1){H=y[b],n=t(H,b);var M=h.items.get(n)??V.get(n);M?wa(M,H,b):(x=_a(null,h,null,null,H,n,b,s,e,r,!0),V.set(n,x)),i.add(n)}for(const[A,k]of h.items)i.has(A)||f.skipped_effects.add(k.e);f.add_callback(d)}else d();P&&ta(!0),c(v)}),q&&(o=X)}function Ee(a,e,r,t,s,l,o,h,T){var p=e.length,N=r.items,V=r.first,v=V,y,u=null,d=[],_=[],P,R,m,x;for(x=0;x<p;x+=1){if(P=e[x],R=h(P,x),m=N.get(R),m===void 0){var b=t.get(R);if(b!==void 0){t.delete(R),N.set(R,b);var H=u?u.next:v;U(r,u,b),U(r,b,H),ua(b,H,s),u=b}else{var n=v?v.e.nodes_start:s;u=_a(n,r,u,u===null?r.first:u.next,P,R,x,l,o,T)}N.set(R,u),d=[],_=[],v=u.next;continue}if(wa(m,P,x),(m.e.f&na)!==0&&xa(m.e),m!==v){if(y!==void 0&&y.has(m)){if(d.length<_.length){var i=_[0],f;u=i.prev;var M=d[0],A=d[d.length-1];for(f=0;f<d.length;f+=1)ua(d[f],i,s);for(f=0;f<_.length;f+=1)y.delete(_[f]);U(r,M.prev,A.next),U(r,u,M),U(r,A,i),v=i,u=A,x-=1,d=[],_=[]}else y.delete(m),ua(m,v,s),U(r,m.prev,m.next),U(r,m,u===null?r.first:u.next),U(r,u,m),u=m;continue}for(d=[],_=[];v!==null&&v.k!==R;)(v.e.f&na)===0&&(y??=new Set).add(v),_.push(v),v=v.next;if(v===null)continue;m=v}d.push(m),u=m,v=m.next}if(v!==null||y!==void 0){for(var k=y===void 0?[]:ka(y);v!==null;)(v.e.f&na)===0&&k.push(v),v=v.next;var S=k.length;if(S>0){var I=p===0?s:null;be(r,k,I)}}a.first=r.first&&r.first.e,a.last=u&&u.e;for(var D of t.values())Ma(D.e);t.clear()}function wa(a,e,r,t){za(a.v,e),a.i=r}function _a(a,e,r,t,s,l,o,h,T,p,N){var V=(T&Xa)!==0,v=(T&ja)===0,y=V?v?J(s,!1,!1):ba(s):s,u=(T&Wa)===0?o:ba(o),d={i:u,v:y,k:l,a:null,e:null,prev:r,next:t};try{if(a===null){var _=document.createDocumentFragment();_.append(a=Ta())}return d.e=da(()=>h(a,y,u,p),q),d.e.prev=r&&r.e,d.e.next=t&&t.e,r===null?N||(e.first=d):(r.next=d,r.e.next=d.e),t!==null&&(t.prev=d,t.e.prev=d.e),d}finally{}}function ua(a,e,r){for(var t=a.next?a.next.e.nodes_start:r,s=e?e.e.nodes_start:r,l=a.e.nodes_start;l!==null&&l!==t;){var o=Za(l);s.before(l),l=o}}function U(a,e,r){e===null?a.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Na(a,e,r=!1){if(a.multiple){if(e==null)return;if(!Sa(e))return te();for(var t of a.options)t.selected=e.includes(j(t));return}for(t of a.options){var s=j(t);if(ne(s,e)){t.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function Ae(a){var e=new MutationObserver(()=>{Na(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ie(()=>{e.disconnect()})}function Te(a,e,r=e){var t=!0;Ia(a,"change",s=>{var l=s?"[selected]":":checked",o;if(a.multiple)o=[].map.call(a.querySelectorAll(l),j);else{var h=a.querySelector(l)??a.querySelector("option:not([disabled])");o=h&&j(h)}r(o)}),le(()=>{var s=e();if(Na(a,s,t),t&&s===void 0){var l=a.querySelector(":checked");l!==null&&(s=j(l),r(s))}a.__value=s,t=!1}),Ae(a)}function j(a){return"__value"in a?a.__value:a.value}const ke=Symbol("is custom element"),Se=Symbol("is html");function xe(a){if(q){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var t=a.value;Aa(a,"value",null),a.value=t}if(a.hasAttribute("checked")){var s=a.checked;Aa(a,"checked",null),a.checked=s}}};a.__on_r=r,ve(r),oe()}}function Aa(a,e,r,t){var s=Me(a);q&&(s[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(a[ue]=r),a.removeAttribute(e))}function Me(a){return a.__attributes??={[ke]:a.nodeName.includes("-"),[Se]:a.namespaceURI===fe}}function Ie(a,e,r=e){var t=new WeakSet;Ia(a,"input",async s=>{var l=s?a.defaultValue:a.value;if(l=fa(a)?ca(l):l,r(l),z!==null&&t.add(z),await ce(),l!==(l=e())){var o=a.selectionStart,h=a.selectionEnd;a.value=l??"",h!==null&&(a.selectionStart=o,a.selectionEnd=Math.min(h,a.value.length))}}),(q&&a.defaultValue!==a.value||de(e)==null&&a.value)&&(r(fa(a)?ca(a.value):a.value),z!==null&&t.add(z)),_e(()=>{var s=e();if(a===document.activeElement){var l=he??z;if(t.has(l))return}fa(a)&&s===ca(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function fa(a){var e=a.type;return e==="number"||e==="range"}function ca(a){return a===""?null:+a}const we="production",Z="http://127.0.0.1:8000";console.log("Mode:",we);console.log("VITE_API_URL:","http://127.0.0.1:8000");console.log("Final API_URL:",Z);var Ne=O('<div class="loading-container svelte-1uha8ag"><div class="loading-spinner svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Laddar meny...</p></div>'),Ce=(a,e,r)=>e(c(r).id),Le=O('<span class="loading-spinner svelte-1uha8ag"></span>'),Oe=O('<button class="btns svelte-1uha8ag"><!> </button>'),Re=O('<div class="btn-container svelte-1uha8ag"></div>'),De=O('<p class="svelte-1uha8ag"> </p>'),Pe=O('<li class="svelte-1uha8ag"> </li>'),He=O('<ul class="svelte-1uha8ag"></ul>'),Ue=O('<div class="system-info svelte-1uha8ag"><div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">CPU:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Minne:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Disk:</span> <span class="value svelte-1uha8ag"> </span></div></div>'),qe=O('<div class="result-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Resultat:</h3> <div class="result-content svelte-1uha8ag"><!></div></div>'),Ve=O('<div class="alarm-inputs svelte-1uha8ag"><form class="svelte-1uha8ag"><label class="svelte-1uha8ag">Typ: <select class="svelte-1uha8ag"><option>CPU användning</option><option>Minnesanvändning</option><option>Diskanvändning</option></select></label> <label class="svelte-1uha8ag">Threshold (%): <input type="number" min="1" max="100" class="svelte-1uha8ag"/></label> <button type="submit" class="svelte-1uha8ag">Skapa larm</button></form></div>'),Be=O('<li class="alarm-item svelte-1uha8ag"><span class="alarm-type svelte-1uha8ag"> </span> <span class="alarm-threshold svelte-1uha8ag"> </span></li>'),Fe=O('<div class="alarms-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Aktiva larm:</h3> <ul class="alarms-list svelte-1uha8ag"></ul></div>'),Je=O("<!> <!> <!> <!>",1);function Qe(a,e){me(e,!1);let r=J([]),t=[],s=J(null),l=J(!1),o=J(!0),h=J(!1),T=J("CPU användning"),p=J(50);async function N(){try{let i=await(await fetch(`${Z}/menu`)).json();w(r,i.options),console.log(c(r))}catch(n){console.log(n.message),console.log(n)}finally{w(o,!1)}}async function V(n){if(w(l,!0),w(s,null),n===3){w(h,!0),w(l,!1);return}try{let f=await(await fetch(`${Z}/select`,{method:"POST",body:JSON.stringify({choice:n}),headers:{"Content-Type":"application/json"}})).json();w(s,f.result),console.log(f)}catch(i){console.log(i.message),w(s,"Ett fel uppstod: "+i.message)}finally{w(l,!1)}}async function v(n){n.preventDefault(),w(l,!0);try{const f=await(await fetch(`${Z}/set_alarm/3`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:c(T),threshold:c(p)})})).json();t.push(f),w(h,!1),w(s,`Larm skapat: ${f.message||"Larm skapat framgångsrikt"}`)}catch(i){console.error("Error creating alarm:",i),w(s,"Ett fel uppstod: "+i.message)}finally{w(l,!1)}}Ha(()=>N()),Da();var y=Je(),u=ia(y);{var d=n=>{var i=Ne();C(n,i)},_=n=>{var i=Re();oa(i,5,()=>c(r),va,(f,M)=>{var A=Oe();A.__click=[Ce,V,M];var k=E(A);{var S=D=>{var Q=Le();C(D,Q)};F(k,D=>{c(l)&&D(S)})}var I=L(k);g(A),Y(()=>{A.disabled=c(l),B(I,` ${c(M).text??""}`)}),C(f,A)}),g(i),C(n,i)};F(u,n=>{c(o)?n(d):n(_,!1)})}var P=L(u,2);{var R=n=>{var i=qe(),f=L(E(i),2),M=E(f);{var A=S=>{var I=De(),D=E(I,!0);g(I),Y(()=>B(D,c(s))),C(S,I)},k=S=>{var I=Ea(),D=ia(I);{var Q=G=>{var K=He();oa(K,5,()=>c(s),va,(aa,ea)=>{var $=Pe(),W=E($,!0);g($),Y(()=>B(W,c(ea))),C(aa,$)}),g(K),C(G,K)},Ca=G=>{var K=Ea(),aa=ia(K);{var ea=$=>{var W=Ue(),ra=E(W),ha=L(E(ra),2),La=E(ha);g(ha),g(ra);var sa=L(ra,2),ma=L(E(sa),2),Oa=E(ma);g(ma),g(sa);var ga=L(sa,2),pa=L(E(ga),2),Ra=E(pa);g(pa),g(ga),g(W),Y(()=>{B(La,`${c(s).cpu_percent??""}%`),B(Oa,`${c(s).memory_percent??""}%`),B(Ra,`${c(s).disk_percent??""}%`)}),C($,W)};F(aa,$=>{typeof c(s)=="object"&&$(ea)},!0)}C(G,K)};F(D,G=>{Array.isArray(c(s))?G(Q):G(Ca,!1)},!0)}C(S,I)};F(M,S=>{typeof c(s)=="string"?S(A):S(k,!1)})}g(f),g(i),C(n,i)};F(P,n=>{c(s)&&n(R)})}var m=L(P,2);{var x=n=>{var i=Ve(),f=E(i),M=E(f),A=L(E(M));Y(()=>{c(T),pe(()=>{})}),g(M);var k=L(M,2),S=L(E(k));xe(S),g(k),ye(2),g(f),g(i),Ua("submit",f,v),Te(A,()=>c(T),I=>w(T,I)),Ie(S,()=>c(p),I=>w(p,I)),C(n,i)};F(m,n=>{c(h)&&n(x)})}var b=L(m,2);{var H=n=>{var i=Fe(),f=L(E(i),2);oa(f,5,()=>t,va,(M,A)=>{var k=Be(),S=E(k),I=E(S,!0);g(S);var D=L(S,2),Q=E(D);g(D),g(k),Y(()=>{B(I,c(A).type||c(T)),B(Q,`${(c(A).threshold||c(p))??""}%`)}),C(M,k)}),g(f),g(i),C(n,i)};F(b,n=>{t.length>0&&n(H)})}C(a,y),ge()}Pa(["click"]);export{Qe as component};
