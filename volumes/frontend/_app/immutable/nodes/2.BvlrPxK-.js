import"../chunks/DsnmJJEf.js";import{i as Da}from"../chunks/CCen76eB.js";import{d as Ra,o as Ha,e as Pa,s as Y}from"../chunks/Dacfoqyi.js";import{c as sa,h as U,L as qa,e as Ta,a as Ua,b as Va,t as c,M as Ya,r as Ba,H as Ja,s as pa,d as ta,k as Z,N as Fa,O as Ga,f as ca,i as Ka,g as X,P as ka,Q as Sa,R as J,S as ya,T as Wa,j as Aa,p as Xa,V as za,W as la,X as xa,Y as Qa,Z as Za,_ as $a,$ as ja,a0 as ae,a1 as ee,a2 as re,a3 as Ma,a4 as se,a5 as te,a6 as le,a7 as ne,a8 as ie,a9 as ve,aa as ue,ab as oe,ac as fe,n as ce,ad as de,ae as _e,I as he,y as O,z as I,A as na,C as L,K as me,af as N,G as g,D as E,J as W,ag as ge,ah as pe,ai as ba}from"../chunks/D_qWitjs.js";import{i as B}from"../chunks/BIN9todE.js";function ia(a,e){return e}function ye(a,e,r){for(var l=a.items,s=[],t=e.length,u=0;u<t;u++)ja(e[u].e,s,!0);var h=t>0&&s.length===0&&r!==null;if(h){var k=r.parentNode;ae(k),k.append(r),l.clear(),q(a,e[0].prev,e[t-1].next)}ee(s,()=>{for(var p=0;p<t;p++){var C=e[p];h||(l.delete(C.k),q(a,C.prev,C.next)),xa(C.e,!h)}})}function va(a,e,r,l,s,t=null){var u=a,h={flags:e,items:new Map,first:null};{var k=a;u=U?sa(qa(k)):k.appendChild(Ta())}U&&Ua();var p=null,C=!1,V=new Map,v=Ya(()=>{var _=r();return Sa(_)?_:_==null?[]:ka(_)}),y,o;function d(){be(o,y,h,V,u,s,e,l,r),t!==null&&(y.length===0?p?Aa(p):p=ca(()=>t(u)):p!==null&&Xa(p,()=>{p=null}))}Va(()=>{o??=re,y=c(v);var _=y.length;if(C&&_===0)return;C=_===0;let H=!1;if(U){var D=Ba(u)===Ja;D!==(_===0)&&(u=pa(),sa(u),ta(!1),H=!0)}if(U){for(var m=null,x,b=0;b<_;b++){if(Z.nodeType===Fa&&Z.data===Ga){u=Z,H=!0,ta(!1);break}var P=y[b],n=l(P,b);x=da(Z,h,m,null,P,n,b,s,e,r),h.items.set(n,x),m=x}_>0&&sa(pa())}if(U)_===0&&t&&(p=ca(()=>t(u)));else if(Ka()){var i=new Set,f=X;for(b=0;b<_;b+=1){P=y[b],n=l(P,b);var M=h.items.get(n)??V.get(n);M?wa(M,P,b):(x=da(null,h,null,null,P,n,b,s,e,r,!0),V.set(n,x)),i.add(n)}for(const[T,S]of h.items)i.has(T)||f.skipped_effects.add(S.e);f.add_callback(d)}else d();H&&ta(!0),c(v)}),U&&(u=Z)}function be(a,e,r,l,s,t,u,h,k){var p=e.length,C=r.items,V=r.first,v=V,y,o=null,d=[],_=[],H,D,m,x;for(x=0;x<p;x+=1){if(H=e[x],D=h(H,x),m=C.get(D),m===void 0){var b=l.get(D);if(b!==void 0){l.delete(D),C.set(D,b);var P=o?o.next:v;q(r,o,b),q(r,b,P),ua(b,P,s),o=b}else{var n=v?v.e.nodes_start:s;o=da(n,r,o,o===null?r.first:o.next,H,D,x,t,u,k)}C.set(D,o),d=[],_=[],v=o.next;continue}if(wa(m,H,x),(m.e.f&la)!==0&&Aa(m.e),m!==v){if(y!==void 0&&y.has(m)){if(d.length<_.length){var i=_[0],f;o=i.prev;var M=d[0],T=d[d.length-1];for(f=0;f<d.length;f+=1)ua(d[f],i,s);for(f=0;f<_.length;f+=1)y.delete(_[f]);q(r,M.prev,T.next),q(r,o,M),q(r,T,i),v=i,o=T,x-=1,d=[],_=[]}else y.delete(m),ua(m,v,s),q(r,m.prev,m.next),q(r,m,o===null?r.first:o.next),q(r,o,m),o=m;continue}for(d=[],_=[];v!==null&&v.k!==D;)(v.e.f&la)===0&&(y??=new Set).add(v),_.push(v),v=v.next;if(v===null)continue;m=v}d.push(m),o=m,v=m.next}if(v!==null||y!==void 0){for(var S=y===void 0?[]:ka(y);v!==null;)(v.e.f&la)===0&&S.push(v),v=v.next;var A=S.length;if(A>0){var w=p===0?s:null;ye(r,S,w)}}a.first=r.first&&r.first.e,a.last=o&&o.e;for(var R of l.values())xa(R.e);l.clear()}function wa(a,e,r,l){Wa(a.v,e),a.i=r}function da(a,e,r,l,s,t,u,h,k,p,C){var V=(k&Qa)!==0,v=(k&Za)===0,y=V?v?J(s,!1,!1):ya(s):s,o=(k&za)===0?u:ya(u),d={i:o,v:y,k:t,a:null,e:null,prev:r,next:l};try{if(a===null){var _=document.createDocumentFragment();_.append(a=Ta())}return d.e=ca(()=>h(a,y,o,p),U),d.e.prev=r&&r.e,d.e.next=l&&l.e,r===null?C||(e.first=d):(r.next=d,r.e.next=d.e),l!==null&&(l.prev=d,l.e.prev=d.e),d}finally{}}function ua(a,e,r){for(var l=a.next?a.next.e.nodes_start:r,s=e?e.e.nodes_start:r,t=a.e.nodes_start;t!==null&&t!==l;){var u=$a(t);s.before(t),t=u}}function q(a,e,r){e===null?a.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Ia(a,e,r=!1){if(a.multiple){if(e==null)return;if(!Sa(e))return te();for(var l of a.options)l.selected=e.includes($(l));return}for(l of a.options){var s=$(l);if(le(s,e)){l.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function Ee(a){var e=new MutationObserver(()=>{Ia(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ne(()=>{e.disconnect()})}function Te(a,e,r=e){var l=!0;Ma(a,"change",s=>{var t=s?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(t),$);else{var h=a.querySelector(t)??a.querySelector("option:not([disabled])");u=h&&$(h)}r(u)}),se(()=>{var s=e();if(Ia(a,s,l),l&&s===void 0){var t=a.querySelector(":checked");t!==null&&(s=$(t),r(s))}a.__value=s,l=!1}),Ee(a)}function $(a){return"__value"in a?a.__value:a.value}const ke=Symbol("is custom element"),Se=Symbol("is html");function Ae(a){if(U){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var l=a.value;Ea(a,"value",null),a.value=l}if(a.hasAttribute("checked")){var s=a.checked;Ea(a,"checked",null),a.checked=s}}};a.__on_r=r,ie(r),ve()}}function Ea(a,e,r,l){var s=xe(a);U&&(s[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(a[ue]=r),a.removeAttribute(e))}function xe(a){return a.__attributes??={[ke]:a.nodeName.includes("-"),[Se]:a.namespaceURI===oe}}function Me(a,e,r=e){var l=new WeakSet;Ma(a,"input",async s=>{var t=s?a.defaultValue:a.value;if(t=oa(a)?fa(t):t,r(t),X!==null&&l.add(X),await fe(),t!==(t=e())){var u=a.selectionStart,h=a.selectionEnd;a.value=t??"",h!==null&&(a.selectionStart=u,a.selectionEnd=Math.min(h,a.value.length))}}),(U&&a.defaultValue!==a.value||ce(e)==null&&a.value)&&(r(oa(a)?fa(a.value):a.value),X!==null&&l.add(X)),de(()=>{var s=e();if(a===document.activeElement){var t=_e??X;if(l.has(t))return}oa(a)&&s===fa(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function oa(a){var e=a.type;return e==="number"||e==="range"}function fa(a){return a===""?null:+a}var we=O('<div class="loading-container svelte-1uha8ag"><div class="loading-spinner svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Laddar meny...</p></div>'),Ie=(a,e,r)=>e(c(r).id),Ne=O('<span class="loading-spinner svelte-1uha8ag"></span>'),Ce=O('<button class="btns svelte-1uha8ag"><!> </button>'),Le=O('<div class="btn-container svelte-1uha8ag"></div>'),Oe=O('<p class="svelte-1uha8ag"> </p>'),De=O('<li class="svelte-1uha8ag"> </li>'),Re=O('<ul class="svelte-1uha8ag"></ul>'),He=O('<div class="system-info svelte-1uha8ag"><div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">CPU:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Minne:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Disk:</span> <span class="value svelte-1uha8ag"> </span></div></div>'),Pe=O('<div class="result-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Resultat:</h3> <div class="result-content svelte-1uha8ag"><!></div></div>'),qe=O('<div class="alarm-inputs svelte-1uha8ag"><form class="svelte-1uha8ag"><label class="svelte-1uha8ag">Typ: <select class="svelte-1uha8ag"><option>CPU användning</option><option>Minnesanvändning</option><option>Diskanvändning</option></select></label> <label class="svelte-1uha8ag">Threshold (%): <input type="number" min="1" max="100" class="svelte-1uha8ag"/></label> <button type="submit" class="svelte-1uha8ag">Skapa larm</button></form></div>'),Ue=O('<li class="alarm-item svelte-1uha8ag"><span class="alarm-type svelte-1uha8ag"> </span> <span class="alarm-threshold svelte-1uha8ag"> </span></li>'),Ve=O('<div class="alarms-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Aktiva larm:</h3> <ul class="alarms-list svelte-1uha8ag"></ul></div>'),Ye=O('<h1 class="svelte-1uha8ag">Raspberry Pi Systemövervakning test</h1> <!> <!> <!> <!>',1);function We(a,e){he(e,!1);let r=J([]),l=[],s=J(null),t=J(!1),u=J(!0),h=J(!1),k=J("CPU användning"),p=J(50);async function C(){console.log("test");try{let i=await(await fetch("http://localhost:3000/menu")).json();N(r,i.options),console.log(c(r))}catch(n){console.log(n.message),console.log(n)}finally{N(u,!1)}}async function V(n){if(N(t,!0),N(s,null),n===3){N(h,!0),N(t,!1);return}try{let f=await(await fetch("http://localhost:3000/select",{method:"POST",body:JSON.stringify({choice:n}),headers:{"Content-Type":"application/json"}})).json();N(s,f.result),console.log(f)}catch(i){console.log(i.message),N(s,"Ett fel uppstod: "+i.message)}finally{N(t,!1)}}async function v(n){n.preventDefault(),N(t,!0);try{const f=await(await fetch("http://localhost:3000/set_alarm/3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:c(k),threshold:c(p)})})).json();l.push(f),N(h,!1),N(s,`Larm skapat: ${f.message||"Larm skapat framgångsrikt"}`)}catch(i){console.error("Error creating alarm:",i),N(s,"Ett fel uppstod: "+i.message)}finally{N(t,!1)}}Ha(()=>C()),Da();var y=Ye(),o=I(na(y),2);{var d=n=>{var i=we();L(n,i)},_=n=>{var i=Le();va(i,5,()=>c(r),ia,(f,M)=>{var T=Ce();T.__click=[Ie,V,M];var S=E(T);{var A=R=>{var z=Ne();L(R,z)};B(S,R=>{c(t)&&R(A)})}var w=I(S);g(T),W(()=>{T.disabled=c(t),Y(w,` ${c(M).text??""}`)}),L(f,T)}),g(i),L(n,i)};B(o,n=>{c(u)?n(d):n(_,!1)})}var H=I(o,2);{var D=n=>{var i=Pe(),f=I(E(i),2),M=E(f);{var T=A=>{var w=Oe(),R=E(w,!0);g(w),W(()=>Y(R,c(s))),L(A,w)},S=A=>{var w=ba(),R=na(w);{var z=G=>{var K=Re();va(K,5,()=>c(s),ia,(j,aa)=>{var F=De(),Q=E(F,!0);g(F),W(()=>Y(Q,c(aa))),L(j,F)}),g(K),L(G,K)},Na=G=>{var K=ba(),j=na(K);{var aa=F=>{var Q=He(),ea=E(Q),_a=I(E(ea),2),Ca=E(_a);g(_a),g(ea);var ra=I(ea,2),ha=I(E(ra),2),La=E(ha);g(ha),g(ra);var ma=I(ra,2),ga=I(E(ma),2),Oa=E(ga);g(ga),g(ma),g(Q),W(()=>{Y(Ca,`${c(s).cpu_percent??""}%`),Y(La,`${c(s).memory_percent??""}%`),Y(Oa,`${c(s).disk_percent??""}%`)}),L(F,Q)};B(j,F=>{typeof c(s)=="object"&&F(aa)},!0)}L(G,K)};B(R,G=>{Array.isArray(c(s))?G(z):G(Na,!1)},!0)}L(A,w)};B(M,A=>{typeof c(s)=="string"?A(T):A(S,!1)})}g(f),g(i),L(n,i)};B(H,n=>{c(s)&&n(D)})}var m=I(H,2);{var x=n=>{var i=qe(),f=E(i),M=E(f),T=I(E(M));W(()=>{c(k),ge(()=>{})}),g(M);var S=I(M,2),A=I(E(S));Ae(A),g(S),pe(2),g(f),g(i),Pa("submit",f,v),Te(T,()=>c(k),w=>N(k,w)),Me(A,()=>c(p),w=>N(p,w)),L(n,i)};B(m,n=>{c(h)&&n(x)})}var b=I(m,2);{var P=n=>{var i=Ve(),f=I(E(i),2);va(f,5,()=>l,ia,(M,T)=>{var S=Ue(),A=E(S),w=E(A,!0);g(A);var R=I(A,2),z=E(R);g(R),g(S),W(()=>{Y(w,c(T).type||c(k)),Y(z,`${(c(T).threshold||c(p))??""}%`)}),L(M,S)}),g(f),g(i),L(n,i)};B(b,n=>{l.length>0&&n(P)})}L(a,y),me()}Ra(["click"]);export{We as component};
