import"../chunks/DsnmJJEf.js";import{i as Da}from"../chunks/CCen76eB.js";import{d as Ra,o as Ha,e as qa,s as Y}from"../chunks/Dacfoqyi.js";import{c as sa,h as U,L as Pa,e as Ta,a as Ua,b as Va,t as c,M as Ya,r as Ba,H as Ja,s as ga,d as la,k as Z,N as Fa,O as Ga,f as ca,i as Ka,g as X,P as ka,Q as Aa,R as J,S as ba,T as Wa,j as Sa,p as Xa,V as za,W as ta,X as xa,Y as Qa,Z as Za,_ as $a,$ as ja,a0 as ae,a1 as ee,a2 as re,a3 as Ma,a4 as se,a5 as le,a6 as te,a7 as ne,a8 as ie,a9 as ve,aa as ue,ab as oe,ac as fe,n as ce,ad as de,ae as _e,I as he,y as O,A as na,C,K as me,z as L,af as I,G as p,D as E,J as W,ag as pe,ah as ge,ai as ya}from"../chunks/D_qWitjs.js";import{i as B}from"../chunks/BIN9todE.js";function ia(a,e){return e}function be(a,e,r){for(var t=a.items,s=[],l=e.length,u=0;u<l;u++)ja(e[u].e,s,!0);var h=l>0&&s.length===0&&r!==null;if(h){var k=r.parentNode;ae(k),k.append(r),t.clear(),P(a,e[0].prev,e[l-1].next)}ee(s,()=>{for(var g=0;g<l;g++){var N=e[g];h||(t.delete(N.k),P(a,N.prev,N.next)),xa(N.e,!h)}})}function va(a,e,r,t,s,l=null){var u=a,h={flags:e,items:new Map,first:null};{var k=a;u=U?sa(Pa(k)):k.appendChild(Ta())}U&&Ua();var g=null,N=!1,V=new Map,v=Ya(()=>{var _=r();return Aa(_)?_:_==null?[]:ka(_)}),b,o;function d(){ye(o,b,h,V,u,s,e,t,r),l!==null&&(b.length===0?g?Sa(g):g=ca(()=>l(u)):g!==null&&Xa(g,()=>{g=null}))}Va(()=>{o??=re,b=c(v);var _=b.length;if(N&&_===0)return;N=_===0;let H=!1;if(U){var D=Ba(u)===Ja;D!==(_===0)&&(u=ga(),sa(u),la(!1),H=!0)}if(U){for(var m=null,x,y=0;y<_;y++){if(Z.nodeType===Fa&&Z.data===Ga){u=Z,H=!0,la(!1);break}var q=b[y],n=t(q,y);x=da(Z,h,m,null,q,n,y,s,e,r),h.items.set(n,x),m=x}_>0&&sa(ga())}if(U)_===0&&l&&(g=ca(()=>l(u)));else if(Ka()){var i=new Set,f=X;for(y=0;y<_;y+=1){q=b[y],n=t(q,y);var M=h.items.get(n)??V.get(n);M?wa(M,q,y):(x=da(null,h,null,null,q,n,y,s,e,r,!0),V.set(n,x)),i.add(n)}for(const[T,A]of h.items)i.has(T)||f.skipped_effects.add(A.e);f.add_callback(d)}else d();H&&la(!0),c(v)}),U&&(u=Z)}function ye(a,e,r,t,s,l,u,h,k){var g=e.length,N=r.items,V=r.first,v=V,b,o=null,d=[],_=[],H,D,m,x;for(x=0;x<g;x+=1){if(H=e[x],D=h(H,x),m=N.get(D),m===void 0){var y=t.get(D);if(y!==void 0){t.delete(D),N.set(D,y);var q=o?o.next:v;P(r,o,y),P(r,y,q),ua(y,q,s),o=y}else{var n=v?v.e.nodes_start:s;o=da(n,r,o,o===null?r.first:o.next,H,D,x,l,u,k)}N.set(D,o),d=[],_=[],v=o.next;continue}if(wa(m,H,x),(m.e.f&ta)!==0&&Sa(m.e),m!==v){if(b!==void 0&&b.has(m)){if(d.length<_.length){var i=_[0],f;o=i.prev;var M=d[0],T=d[d.length-1];for(f=0;f<d.length;f+=1)ua(d[f],i,s);for(f=0;f<_.length;f+=1)b.delete(_[f]);P(r,M.prev,T.next),P(r,o,M),P(r,T,i),v=i,o=T,x-=1,d=[],_=[]}else b.delete(m),ua(m,v,s),P(r,m.prev,m.next),P(r,m,o===null?r.first:o.next),P(r,o,m),o=m;continue}for(d=[],_=[];v!==null&&v.k!==D;)(v.e.f&ta)===0&&(b??=new Set).add(v),_.push(v),v=v.next;if(v===null)continue;m=v}d.push(m),o=m,v=m.next}if(v!==null||b!==void 0){for(var A=b===void 0?[]:ka(b);v!==null;)(v.e.f&ta)===0&&A.push(v),v=v.next;var S=A.length;if(S>0){var w=g===0?s:null;be(r,A,w)}}a.first=r.first&&r.first.e,a.last=o&&o.e;for(var R of t.values())xa(R.e);t.clear()}function wa(a,e,r,t){Wa(a.v,e),a.i=r}function da(a,e,r,t,s,l,u,h,k,g,N){var V=(k&Qa)!==0,v=(k&Za)===0,b=V?v?J(s,!1,!1):ba(s):s,o=(k&za)===0?u:ba(u),d={i:o,v:b,k:l,a:null,e:null,prev:r,next:t};try{if(a===null){var _=document.createDocumentFragment();_.append(a=Ta())}return d.e=ca(()=>h(a,b,o,g),U),d.e.prev=r&&r.e,d.e.next=t&&t.e,r===null?N||(e.first=d):(r.next=d,r.e.next=d.e),t!==null&&(t.prev=d,t.e.prev=d.e),d}finally{}}function ua(a,e,r){for(var t=a.next?a.next.e.nodes_start:r,s=e?e.e.nodes_start:r,l=a.e.nodes_start;l!==null&&l!==t;){var u=$a(l);s.before(l),l=u}}function P(a,e,r){e===null?a.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Ia(a,e,r=!1){if(a.multiple){if(e==null)return;if(!Aa(e))return le();for(var t of a.options)t.selected=e.includes($(t));return}for(t of a.options){var s=$(t);if(te(s,e)){t.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function Ee(a){var e=new MutationObserver(()=>{Ia(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ne(()=>{e.disconnect()})}function Te(a,e,r=e){var t=!0;Ma(a,"change",s=>{var l=s?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(l),$);else{var h=a.querySelector(l)??a.querySelector("option:not([disabled])");u=h&&$(h)}r(u)}),se(()=>{var s=e();if(Ia(a,s,t),t&&s===void 0){var l=a.querySelector(":checked");l!==null&&(s=$(l),r(s))}a.__value=s,t=!1}),Ee(a)}function $(a){return"__value"in a?a.__value:a.value}const ke=Symbol("is custom element"),Ae=Symbol("is html");function Se(a){if(U){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var t=a.value;Ea(a,"value",null),a.value=t}if(a.hasAttribute("checked")){var s=a.checked;Ea(a,"checked",null),a.checked=s}}};a.__on_r=r,ie(r),ve()}}function Ea(a,e,r,t){var s=xe(a);U&&(s[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(a[ue]=r),a.removeAttribute(e))}function xe(a){return a.__attributes??={[ke]:a.nodeName.includes("-"),[Ae]:a.namespaceURI===oe}}function Me(a,e,r=e){var t=new WeakSet;Ma(a,"input",async s=>{var l=s?a.defaultValue:a.value;if(l=oa(a)?fa(l):l,r(l),X!==null&&t.add(X),await fe(),l!==(l=e())){var u=a.selectionStart,h=a.selectionEnd;a.value=l??"",h!==null&&(a.selectionStart=u,a.selectionEnd=Math.min(h,a.value.length))}}),(U&&a.defaultValue!==a.value||ce(e)==null&&a.value)&&(r(oa(a)?fa(a.value):a.value),X!==null&&t.add(X)),de(()=>{var s=e();if(a===document.activeElement){var l=_e??X;if(t.has(l))return}oa(a)&&s===fa(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function oa(a){var e=a.type;return e==="number"||e==="range"}function fa(a){return a===""?null:+a}var we=O('<div class="loading-container svelte-1uha8ag"><div class="loading-spinner svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Laddar meny...</p></div>'),Ie=(a,e,r)=>e(c(r).id),Ne=O('<span class="loading-spinner svelte-1uha8ag"></span>'),Ce=O('<button class="btns svelte-1uha8ag"><!> </button>'),Le=O('<div class="btn-container svelte-1uha8ag"></div>'),Oe=O('<p class="svelte-1uha8ag"> </p>'),De=O('<li class="svelte-1uha8ag"> </li>'),Re=O('<ul class="svelte-1uha8ag"></ul>'),He=O('<div class="system-info svelte-1uha8ag"><div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">CPU:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Minne:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">Disk:</span> <span class="value svelte-1uha8ag"> </span></div></div>'),qe=O('<div class="result-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Resultat:</h3> <div class="result-content svelte-1uha8ag"><!></div></div>'),Pe=O('<div class="alarm-inputs svelte-1uha8ag"><form class="svelte-1uha8ag"><label class="svelte-1uha8ag">Typ: <select class="svelte-1uha8ag"><option>CPU användning</option><option>Minnesanvändning</option><option>Diskanvändning</option></select></label> <label class="svelte-1uha8ag">Threshold (%): <input type="number" min="1" max="100" class="svelte-1uha8ag"/></label> <button type="submit" class="svelte-1uha8ag">Skapa larm</button></form></div>'),Ue=O('<li class="alarm-item svelte-1uha8ag"><span class="alarm-type svelte-1uha8ag"> </span> <span class="alarm-threshold svelte-1uha8ag"> </span></li>'),Ve=O('<div class="alarms-container svelte-1uha8ag"><h3 class="svelte-1uha8ag">Aktiva larm:</h3> <ul class="alarms-list svelte-1uha8ag"></ul></div>'),Ye=O("<!> <!> <!> <!>",1);function We(a,e){he(e,!1);let r=J([]),t=[],s=J(null),l=J(!1),u=J(!0),h=J(!1),k=J("CPU användning"),g=J(50);async function N(){console.log("test");try{let i=await(await fetch("http://localhost:3000/menu")).json();I(r,i.options),console.log(c(r))}catch(n){console.log(n.message),console.log(n)}finally{I(u,!1)}}async function V(n){if(I(l,!0),I(s,null),n===3){I(h,!0),I(l,!1);return}try{let f=await(await fetch("http://localhost:3000/select",{method:"POST",body:JSON.stringify({choice:n}),headers:{"Content-Type":"application/json"}})).json();I(s,f.result),console.log(f)}catch(i){console.log(i.message),I(s,"Ett fel uppstod: "+i.message)}finally{I(l,!1)}}async function v(n){n.preventDefault(),I(l,!0);try{const f=await(await fetch("http://localhost:3000/set_alarm/3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:c(k),threshold:c(g)})})).json();t.push(f),I(h,!1),I(s,`Larm skapat: ${f.message||"Larm skapat framgångsrikt"}`)}catch(i){console.error("Error creating alarm:",i),I(s,"Ett fel uppstod: "+i.message)}finally{I(l,!1)}}Ha(()=>N()),Da();var b=Ye(),o=na(b);{var d=n=>{var i=we();C(n,i)},_=n=>{var i=Le();va(i,5,()=>c(r),ia,(f,M)=>{var T=Ce();T.__click=[Ie,V,M];var A=E(T);{var S=R=>{var z=Ne();C(R,z)};B(A,R=>{c(l)&&R(S)})}var w=L(A);p(T),W(()=>{T.disabled=c(l),Y(w,` ${c(M).text??""}`)}),C(f,T)}),p(i),C(n,i)};B(o,n=>{c(u)?n(d):n(_,!1)})}var H=L(o,2);{var D=n=>{var i=qe(),f=L(E(i),2),M=E(f);{var T=S=>{var w=Oe(),R=E(w,!0);p(w),W(()=>Y(R,c(s))),C(S,w)},A=S=>{var w=ya(),R=na(w);{var z=G=>{var K=Re();va(K,5,()=>c(s),ia,(j,aa)=>{var F=De(),Q=E(F,!0);p(F),W(()=>Y(Q,c(aa))),C(j,F)}),p(K),C(G,K)},Na=G=>{var K=ya(),j=na(K);{var aa=F=>{var Q=He(),ea=E(Q),_a=L(E(ea),2),Ca=E(_a);p(_a),p(ea);var ra=L(ea,2),ha=L(E(ra),2),La=E(ha);p(ha),p(ra);var ma=L(ra,2),pa=L(E(ma),2),Oa=E(pa);p(pa),p(ma),p(Q),W(()=>{Y(Ca,`${c(s).cpu_percent??""}%`),Y(La,`${c(s).memory_percent??""}%`),Y(Oa,`${c(s).disk_percent??""}%`)}),C(F,Q)};B(j,F=>{typeof c(s)=="object"&&F(aa)},!0)}C(G,K)};B(R,G=>{Array.isArray(c(s))?G(z):G(Na,!1)},!0)}C(S,w)};B(M,S=>{typeof c(s)=="string"?S(T):S(A,!1)})}p(f),p(i),C(n,i)};B(H,n=>{c(s)&&n(D)})}var m=L(H,2);{var x=n=>{var i=Pe(),f=E(i),M=E(f),T=L(E(M));W(()=>{c(k),pe(()=>{})}),p(M);var A=L(M,2),S=L(E(A));Se(S),p(A),ge(2),p(f),p(i),qa("submit",f,v),Te(T,()=>c(k),w=>I(k,w)),Me(S,()=>c(g),w=>I(g,w)),C(n,i)};B(m,n=>{c(h)&&n(x)})}var y=L(m,2);{var q=n=>{var i=Ve(),f=L(E(i),2);va(f,5,()=>t,ia,(M,T)=>{var A=Ue(),S=E(A),w=E(S,!0);p(S);var R=L(S,2),z=E(R);p(R),p(A),W(()=>{Y(w,c(T).type||c(k)),Y(z,`${(c(T).threshold||c(g))??""}%`)}),C(M,A)}),p(f),p(i),C(n,i)};B(y,n=>{t.length>0&&n(q)})}C(a,b),me()}Ra(["click"]);export{We as component};
