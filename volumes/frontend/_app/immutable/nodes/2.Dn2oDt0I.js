import"../chunks/DsnmJJEf.js";import{i as ne}from"../chunks/BIrKCVra.js";import{d as se,o as le,a as ie,s as E,e as oe}from"../chunks/DpkZoZQF.js";import{c as Ra,h as la,ac as ve,e as Ja,a as ce,b as de,t as n,ay as ue,r as fe,H as _e,s as Ga,d as Da,k as Aa,S as me,ak as he,f as Ha,i as pe,g as ga,ah as Ka,a8 as Ya,az as q,M as ja,Q as ge,j as za,p as ye,aA as be,aB as La,$ as Qa,aC as we,aD as Ae,a5 as ke,aE as xe,ag as Ee,aF as Ie,R as Me,aG as Wa,aH as Te,aI as Se,aJ as Ce,a9 as Ne,P as Fe,aK as Re,aL as De,aM as Le,ax as $e,n as Oe,N as Pe,aN as He,I as Ue,y as I,A as ka,C as w,K as qe,z as g,aO as u,aP as Ma,D as o,G as i,J as U,aQ as Ge,a0 as je,aR as Ve}from"../chunks/Dfj9gJ30.js";import{i as Z}from"../chunks/C8imIOYT.js";function Ta(a,e){return e}function Be(a,e,r){for(var t=a.items,l=[],v=e.length,m=0;m<v;m++)xe(e[m].e,l,!0);var h=v>0&&l.length===0&&r!==null;if(h){var F=r.parentNode;Ee(F),F.append(r),t.clear(),sa(a,e[0].prev,e[v-1].next)}Ie(l,()=>{for(var x=0;x<v;x++){var T=e[x];h||(t.delete(T.k),sa(a,T.prev,T.next)),Qa(T.e,!h)}})}function Sa(a,e,r,t,l,v=null){var m=a,h={flags:e,items:new Map,first:null};{var F=a;m=la?Ra(ve(F)):F.appendChild(Ja())}la&&ce();var x=null,T=!1,S=new Map,c=ue(()=>{var p=r();return Ya(p)?p:p==null?[]:Ka(p)}),y,f;function _(){Je(f,y,h,S,m,l,e,t,r),v!==null&&(y.length===0?x?za(x):x=Ha(()=>v(m)):x!==null&&ye(x,()=>{x=null}))}de(()=>{f??=Me,y=n(c);var p=y.length;if(T&&p===0)return;T=p===0;let aa=!1;if(la){var G=fe(m)===_e;G!==(p===0)&&(m=Ga(),Ra(m),Da(!1),aa=!0)}if(la){for(var A=null,C,b=0;b<p;b++){if(Aa.nodeType===me&&Aa.data===he){m=Aa,aa=!0,Da(!1);break}var j=y[b],V=t(j,b);C=Ua(Aa,h,A,null,j,V,b,l,e,r),h.items.set(V,C),A=C}p>0&&Ra(Ga())}if(la)p===0&&v&&(x=Ha(()=>v(m)));else if(pe()){var Y=new Set,D=ga;for(b=0;b<p;b+=1){j=y[b],V=t(j,b);var oa=h.items.get(V)??S.get(V);oa?Xa(oa,j,b):(C=Ua(null,h,null,null,j,V,b,l,e,r,!0),S.set(V,C)),Y.add(V)}for(const[va,fa]of h.items)Y.has(va)||D.skipped_effects.add(fa.e);D.add_callback(_)}else _();aa&&Da(!0),n(c)}),la&&(m=Aa)}function Je(a,e,r,t,l,v,m,h,F){var x=e.length,T=r.items,S=r.first,c=S,y,f=null,_=[],p=[],aa,G,A,C;for(C=0;C<x;C+=1){if(aa=e[C],G=h(aa,C),A=T.get(G),A===void 0){var b=t.get(G);if(b!==void 0){t.delete(G),T.set(G,b);var j=f?f.next:c;sa(r,f,b),sa(r,b,j),$a(b,j,l),f=b}else{var V=c?c.e.nodes_start:l;f=Ua(V,r,f,f===null?r.first:f.next,aa,G,C,v,m,F)}T.set(G,f),_=[],p=[],c=f.next;continue}if(Xa(A,aa,C),(A.e.f&La)!==0&&za(A.e),A!==c){if(y!==void 0&&y.has(A)){if(_.length<p.length){var Y=p[0],D;f=Y.prev;var oa=_[0],va=_[_.length-1];for(D=0;D<_.length;D+=1)$a(_[D],Y,l);for(D=0;D<p.length;D+=1)y.delete(p[D]);sa(r,oa.prev,va.next),sa(r,f,oa),sa(r,va,Y),c=Y,f=va,C-=1,_=[],p=[]}else y.delete(A),$a(A,c,l),sa(r,A.prev,A.next),sa(r,A,f===null?r.first:f.next),sa(r,f,A),f=A;continue}for(_=[],p=[];c!==null&&c.k!==G;)(c.e.f&La)===0&&(y??=new Set).add(c),p.push(c),c=c.next;if(c===null)continue;A=c}_.push(A),f=A,c=A.next}if(c!==null||y!==void 0){for(var fa=y===void 0?[]:Ka(y);c!==null;)(c.e.f&La)===0&&fa.push(c),c=c.next;var Ca=fa.length;if(Ca>0){var Ea=x===0?l:null;Be(r,fa,Ea)}}a.first=r.first&&r.first.e,a.last=f&&f.e;for(var Na of t.values())Qa(Na.e);t.clear()}function Xa(a,e,r,t){ge(a.v,e),a.i=r}function Ua(a,e,r,t,l,v,m,h,F,x,T){var S=(F&we)!==0,c=(F&Ae)===0,y=S?c?q(l,!1,!1):ja(l):l,f=(F&be)===0?m:ja(m),_={i:f,v:y,k:v,a:null,e:null,prev:r,next:t};try{if(a===null){var p=document.createDocumentFragment();p.append(a=Ja())}return _.e=Ha(()=>h(a,y,f,x),la),_.e.prev=r&&r.e,_.e.next=t&&t.e,r===null?T||(e.first=_):(r.next=_,r.e.next=_.e),t!==null&&(t.prev=_,t.e.prev=_.e),_}finally{}}function $a(a,e,r){for(var t=a.next?a.next.e.nodes_start:r,l=e?e.e.nodes_start:r,v=a.e.nodes_start;v!==null&&v!==t;){var m=ke(v);l.before(v),v=m}}function sa(a,e,r){e===null?a.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Za(a,e,r=!1){if(a.multiple){if(e==null)return;if(!Ya(e))return Se();for(var t of a.options)t.selected=e.includes(xa(t));return}for(t of a.options){var l=xa(t);if(Ce(l,e)){t.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function Ke(a){var e=new MutationObserver(()=>{Za(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ne(()=>{e.disconnect()})}function Ye(a,e,r=e){var t=!0;Wa(a,"change",l=>{var v=l?"[selected]":":checked",m;if(a.multiple)m=[].map.call(a.querySelectorAll(v),xa);else{var h=a.querySelector(v)??a.querySelector("option:not([disabled])");m=h&&xa(h)}r(m)}),Te(()=>{var l=e();if(Za(a,l,t),t&&l===void 0){var v=a.querySelector(":checked");v!==null&&(l=xa(v),r(l))}a.__value=l,t=!1}),Ke(a)}function xa(a){return"__value"in a?a.__value:a.value}const ze=Symbol("is custom element"),Qe=Symbol("is html");function We(a){if(la){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var t=a.value;Va(a,"value",null),a.value=t}if(a.hasAttribute("checked")){var l=a.checked;Va(a,"checked",null),a.checked=l}}};a.__on_r=r,Fe(r),Re()}}function Va(a,e,r,t){var l=Xe(a);la&&(l[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||l[e]!==(l[e]=r)&&(e==="loading"&&(a[De]=r),a.removeAttribute(e))}function Xe(a){return a.__attributes??={[ze]:a.nodeName.includes("-"),[Qe]:a.namespaceURI===Le}}function Ze(a,e,r=e){var t=new WeakSet;Wa(a,"input",async l=>{var v=l?a.defaultValue:a.value;if(v=Oa(a)?Pa(v):v,r(v),ga!==null&&t.add(ga),await $e(),v!==(v=e())){var m=a.selectionStart,h=a.selectionEnd;a.value=v??"",h!==null&&(a.selectionStart=m,a.selectionEnd=Math.min(h,a.value.length))}}),(la&&a.defaultValue!==a.value||Oe(e)==null&&a.value)&&(r(Oa(a)?Pa(a.value):a.value),ga!==null&&t.add(ga)),Pe(()=>{var l=e();if(a===document.activeElement){var v=He??ga;if(t.has(v))return}Oa(a)&&l===Pa(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function Oa(a){var e=a.type;return e==="number"||e==="range"}function Pa(a){return a===""?null:+a}const ua="http://127.0.0.1:8000";async function ar(){try{return(await(await fetch(`${ua}/menu`)).json()).options}catch(a){throw console.error("Fel vid h√§mtning av meny:",a.message),a}}async function Ba(a){try{return(await(await fetch(`${ua}/select`,{method:"POST",body:JSON.stringify({choice:a}),headers:{"Content-Type":"application/json"}})).json()).result}catch(e){throw console.error("Fel vid menyval:",e.message),e}}async function er(){try{return(await(await fetch(`${ua}/alarms`)).json()).alarms||[]}catch(a){throw console.error("Fel vid h√§mtning av alarm:",a.message),a}}async function rr(a,e){try{return await(await fetch(`${ua}/alarms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:a,threshold:e})})).json()}catch(r){throw console.error("Fel vid skapande av alarm:",r.message),r}}async function tr(a){try{return await(await fetch(`${ua}/alarms/${a}`,{method:"DELETE"})).json()}catch(e){throw console.error("Fel vid borttagning av alarm:",e.message),e}}async function nr(){try{return await(await fetch(`${ua}/alarms/status`)).json()}catch(a){throw console.error("Fel vid h√§mtning av alarm status:",a.message),a}}async function sr(){try{return await(await fetch(`${ua}/alarms/monitoring/start`,{method:"POST"})).json()}catch(a){throw console.error("Fel vid start av alarm monitoring:",a.message),a}}async function lr(){try{return await(await fetch(`${ua}/alarms/monitoring/stop`,{method:"POST"})).json()}catch(a){throw console.error("Fel vid stopp av alarm monitoring:",a.message),a}}var ir=I('<div class="loading-container"><div class="loading-spinner"></div> <p>Laddar meny...</p></div>'),or=(a,e,r)=>e(n(r).id),vr=I('<li class="alarm-item"><div class="alarm-info"><span class="alarm-type"> </span> <span class="alarm-threshold"> </span></div> <button class="btn btn-danger">Ta bort</button></li>'),cr=I('<div class="alarms-container"><div class="alarms-header"><h3> </h3> <button class="btn btn-danger">Stoppa √∂vervakning</button></div> <ul class="alarms-list"></ul></div>'),dr=I('<div class="no-alarms"><h3>üîç √ñvervakningsl√§ge aktivt</h3> <p>Inga aktiva larm konfigurerade.</p> <button class="btn btn-danger">Stoppa √∂vervakning</button></div>'),ur=I('<li class="triggered-alarm-item"><div class="alarm-warning"><span class="warning-text"> </span> <span class="current-value"> </span></div></li>'),fr=I('<div class="triggered-alarms-container"><h3> </h3> <ul class="triggered-alarms-list"></ul></div>'),_r=I('<div class="no-triggered-alarms"><p>‚úÖ Inga larm triggade f√∂r tillf√§llet</p></div>'),mr=I('<div class="monitoring-mode"><!> <!></div>'),hr=(a,e,r)=>e(n(r).id),pr=I('<span class="loading-spinner"></span>'),gr=I('<div class="btn-content"><div class="btn-title"> </div> <div class="btn-values"><span> </span> <span> </span> <span> </span></div></div>'),yr=I('<div class="btn-content"><div class="btn-title"> </div> <div class="btn-values"><span> </span> <span> </span> <span> </span></div></div>'),br=I('<div class="btn-content"><div class="btn-title"> </div> <div class="btn-values"><span> </span></div></div>'),wr=I('<button class="btn"><!></button>'),Ar=I('<div class="btn-container"></div>'),kr=I('<div class="result-container"><div class="result-header"><h3>Fel:</h3></div> <div class="result-content"><p> </p></div></div>'),xr=I('<div class="alarm-inputs"><form><label>Typ: <select><option>CPU anv√§ndning</option><option>Minnesanv√§ndning</option><option>Diskanv√§ndning</option></select></label> <label>Threshold (%): <input type="number" min="1" max="100"/></label> <button type="submit">Skapa larm</button></form></div>'),Er=(a,e,r)=>e(n(r).id),Ir=I('<li class="alarm-item"><div class="alarm-info"><span class="alarm-type"> </span> <span class="alarm-threshold"> </span></div> <button class="btn btn-danger">Ta bort</button></li>'),Mr=I('<div class="alarms-container"><h3> </h3> <ul class="alarms-list"></ul></div>'),Tr=I("<!> <!> <!> <!>",1);function Dr(a,e){Ue(e,!1);let r=q([]),t=q(null),l=q(null),v=q(!1),m=q(!0),h=q(!1),F=q(!1),x=q("CPU anv√§ndning"),T=q(50),S=null,c=q([]),y=q([]),f=q(!1),_=null;async function p(){try{u(r,await ar())}catch(s){console.error("Error loading menu:",s.message)}finally{u(m,!1)}}async function aa(s){u(v,!0),u(t,null);try{if(s===3){u(h,!0);return}if(s===1){G(s);return}if(s===4){await b(),u(h,!1),u(F,!n(F));return}if(s===5){await V();return}if(s===6){A();return}u(t,await Ba(s))}catch(d){console.error("Error in selectChoice:",d.message),u(t,"Ett fel uppstod: "+d.message)}finally{u(v,!1)}}async function G(s){S&&clearInterval(S),S=setInterval(async()=>{try{u(l,await Ba(s))}catch(d){console.error("Fel vid √∂vervakning:",d.message),u(l,"Ett fel uppstod vid √∂vervakning: "+d.message)}},1e3)}function A(){S&&(clearInterval(S),S=null),_&&(clearInterval(_),_=null),n(f)&&Y(),u(l,null),u(t,null),u(f,!1),u(y,[])}async function C(s){s.preventDefault(),u(v,!0);try{const d=await rr(n(x),n(T));d.error?u(t,d.error):(await b(),u(h,!1),u(t,d.message))}catch(d){console.error("Error creating alarm:",d),u(t,"Ett fel uppstod: "+d.message)}finally{u(v,!1)}}async function b(){try{u(c,await er())}catch(s){console.error("Fel vid h√§mtning av alarm:",s.message)}}async function j(){try{const s=await nr();u(y,s.triggered_alarms||[]),u(f,s.monitoring_active)}catch(s){console.error("Fel vid h√§mtning av alarm status:",s.message)}}async function V(){try{const s=await sr();s.message&&(u(f,!0),_=setInterval(j,2e3),u(t,s.message))}catch(s){console.error("Fel vid start av alarm monitoring:",s.message),u(t,"Ett fel uppstod: "+s.message)}}async function Y(){try{const s=await lr();s.message&&(u(f,!1),_&&(clearInterval(_),_=null),u(t,s.message))}catch(s){console.error("Fel vid stopp av alarm monitoring:",s.message),u(t,"Ett fel uppstod: "+s.message)}}async function D(s){try{const d=await tr(s);d.message?(await b(),u(t,d.message)):u(t,d.error)}catch(d){console.error("Fel vid borttagning av alarm:",d.message),u(t,"Ett fel uppstod: "+d.message)}}le(async()=>{await p(),await b(),await j()}),ie(()=>{S&&clearInterval(S),_&&clearInterval(_)}),ne();var oa=Tr(),va=ka(oa);{var fa=s=>{var d=ir();w(s,d)},Ca=s=>{var d=Ma(),B=ka(d);{var ea=z=>{var L=mr(),J=o(L);{var $=k=>{var M=cr(),W=o(M),_a=o(W),pa=o(_a);i(_a);var ra=g(_a,2);ra.__click=Y,i(W);var P=g(W,2);Sa(P,5,()=>n(c),Ta,(X,ta)=>{var K=vr(),N=o(K),R=o(N),H=o(R,!0);i(R);var na=g(R,2),ia=o(na);i(na),i(N);var O=g(N,2);O.__click=[or,D,ta],i(K),U(()=>{E(H,n(ta).type),E(ia,`${n(ta).threshold??""}%`)}),w(X,K)}),i(P),i(M),U(()=>E(pa,`üîç √ñvervakningsl√§ge aktivt - Aktiva larm (${n(c).length??""})`)),w(k,M)},Q=k=>{var M=dr(),W=g(o(M),4);W.__click=Y,i(M),w(k,M)};Z(J,k=>{n(c).length>0?k($):k(Q,!1)})}var ya=g(J,2);{var ha=k=>{var M=fr(),W=o(M),_a=o(W);i(W);var pa=g(W,2);Sa(pa,5,()=>n(y),Ta,(ra,P)=>{var X=ur(),ta=o(X),K=o(ta),N=o(K);i(K);var R=g(K,2),H=o(R);i(R),i(ta),i(X),U(na=>{E(N,`VARNING: ${n(P).alarm.type??""} √ñVERSTIGER ${n(P).threshold??""}%`),E(H,`Aktuellt v√§rde: ${na??""}%`)},[()=>n(P).current_value.toFixed(1)]),w(ra,X)}),i(pa),i(M),U(()=>E(_a,`üö® TRIGGADE LARM (${n(y).length??""})`)),w(k,M)},ba=k=>{var M=_r();w(k,M)};Z(ya,k=>{n(y).length>0?k(ha):k(ba,!1)})}i(L),w(z,L)},ca=z=>{var L=Ar();Sa(L,5,()=>n(r),Ta,(J,$)=>{var Q=wr();Q.__click=[hr,aa,$];var ya=o(Q);{var ha=k=>{var M=pr();w(k,M)},ba=k=>{var M=Ma(),W=ka(M);{var _a=ra=>{var P=gr(),X=o(P),ta=o(X,!0);i(X);var K=g(X,2),N=o(K),R=o(N);i(N);var H=g(N,2),na=o(H);i(H);var ia=g(H,2),O=o(ia);i(ia),i(K),i(P),U(()=>{E(ta,n($).text),E(R,`CPU: ${n(l).cpu_percent??""}%`),E(na,`RAM: ${n(l).memory_percent??""}%`),E(O,`Disk: ${n(l).disk_percent??""}%`)}),w(ra,P)},pa=ra=>{var P=Ma(),X=ka(P);{var ta=N=>{var R=yr(),H=o(R),na=o(H,!0);i(H);var ia=g(H,2),O=o(ia),da=o(O);i(O);var ma=g(O,2),Fa=o(ma);i(ma);var wa=g(ma,2),Ia=o(wa);i(wa),i(ia),i(R),U(()=>{E(na,n($).text),E(da,`CPU: ${n(t).cpu_percent??""}%`),E(Fa,`RAM: ${n(t).memory_percent??""}%`),E(Ia,`Disk: ${n(t).disk_percent??""}%`)}),w(N,R)},K=N=>{var R=Ma(),H=ka(R);{var na=O=>{var da=br(),ma=o(da),Fa=o(ma,!0);i(ma);var wa=g(ma,2),Ia=o(wa),te=o(Ia);i(Ia),i(wa),i(da),U(()=>{E(Fa,n($).text),E(te,`${n(c).length??""} alarm aktiva`)}),w(O,da)},ia=O=>{var da=Ve();U(()=>E(da,n($).text)),w(O,da)};Z(H,O=>{n($).id===4&&n(c).length>0?O(na):O(ia,!1)},!0)}w(N,R)};Z(X,N=>{n($).id===2&&n(t)&&typeof n(t)=="object"?N(ta):N(K,!1)},!0)}w(ra,P)};Z(W,ra=>{n($).id===1&&n(l)&&typeof n(l)=="object"?ra(_a):ra(pa,!1)},!0)}w(k,M)};Z(ya,k=>{n(v)?k(ha):k(ba,!1)})}i(Q),U(()=>Q.disabled=n(v)),w(J,Q)}),i(L),w(z,L)};Z(B,z=>{n(f)?z(ea):z(ca,!1)},!0)}w(s,d)};Z(va,s=>{n(m)?s(fa):s(Ca,!1)})}var Ea=g(va,2);{var Na=s=>{var d=kr(),B=g(o(d),2),ea=o(B),ca=o(ea,!0);i(ea),i(B),i(d),U(()=>E(ca,n(t))),w(s,d)};Z(Ea,s=>{n(t)&&!n(h)&&(typeof n(t)=="string"&&n(t).includes("fel")||typeof n(t)=="string"&&n(t).includes("error"))&&s(Na)})}var qa=g(Ea,2);{var ae=s=>{var d=xr(),B=o(d),ea=o(B),ca=g(o(ea));U(()=>{n(x),Ge(()=>{})}),i(ea);var z=g(ea,2),L=g(o(z));We(L),i(z),je(2),i(B),i(d),oe("submit",B,C),Ye(ca,()=>n(x),J=>u(x,J)),Ze(L,()=>n(T),J=>u(T,J)),w(s,d)};Z(qa,s=>{n(h)&&!n(f)&&s(ae)})}var ee=g(qa,2);{var re=s=>{var d=Mr(),B=o(d),ea=o(B);i(B);var ca=g(B,2);Sa(ca,5,()=>n(c),Ta,(z,L)=>{var J=Ir(),$=o(J),Q=o($),ya=o(Q,!0);i(Q);var ha=g(Q,2),ba=o(ha);i(ha),i($);var k=g($,2);k.__click=[Er,D,L],i(J),U(()=>{E(ya,n(L).type),E(ba,`${n(L).threshold??""}%`)}),w(z,J)}),i(ca),i(d),U(()=>E(ea,`Aktiva larm (${n(c).length??""}):`)),w(s,d)};Z(ee,s=>{n(c).length>0&&!n(f)&&!n(h)&&n(F)&&s(re)})}w(a,oa),qe()}se(["click"]);export{Dr as component};
